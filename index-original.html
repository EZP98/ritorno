<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>RITORNO - Adele Lo Feudo ALF | Museo a Cielo Aperto di Camo</title>
    <meta name="description" content="Mostra personale di Adele Lo Feudo - 49 foglie dipinte in acrilico">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><circle cx='16' cy='16' r='16' fill='%23F64128'/></svg>">
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><circle cx='16' cy='16' r='16' fill='%23F64128'/></svg>">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="video-button.css">
    <link rel="stylesheet" href="nav-svg.css">
</head>
<body>
    <section class="hero-section hero-main" id="top">
        <div class="hero-content">
            <nav class="top-navbar">
                <div class="navbar-content">
                    <div class="nav-links">
                        <a href="#top" class="nav-link" onclick="navigateWithTransition(event, 'top')">RITORNO</a>
                        <a href="#works" class="nav-link" onclick="navigateWithTransition(event, 'works')">OPERE</a>
                        <a href="#texts" class="nav-link" onclick="navigateWithTransition(event, 'texts')">CRITICA</a>
                    </div>
                    <button class="menu-hamburger" onclick="toggleMenu()">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
            </nav>
            
            <!-- Mobile Menu -->
            <div class="mobile-menu" id="mobileMenu">
                <div class="mobile-menu-content">
                    <a href="#top" class="mobile-nav-link" onclick="navigateWithTransition(event, 'top'); closeMenu();">RITORNO</a>
                    <a href="#works" class="mobile-nav-link" onclick="navigateWithTransition(event, 'works'); closeMenu();">OPERE</a>
                    <a href="#texts" class="mobile-nav-link" onclick="navigateWithTransition(event, 'texts'); closeMenu();">CRITICA</a>
                </div>
            </div>
            
            <div class="hero-header">
                <div class="museo">Museo a Cielo Aperto di Camo</div>
                <img src="ritorno.svg" alt="RITORNO" class="ritorno-svg">
                
                <div class="subtitle-block">
                    <div class="subtitle-text">
                        PERSONALE DI ADELE LO FEUDO<br>
                        A CURA DI CLAUDIO LORENZONI
                    </div>
                </div>
                
                <button class="video-button" onclick="openVideoModal()">
                    <span>GUARDA IL VIDEO</span>
                    <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M8 5v14l11-7z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
            
            <div class="bottom-spacing"></div>
        </div>
    </section>
    
    
    <!-- Works Section -->
    <section id="works" class="works-section">
        <div class="works-grid" id="worksGrid">
            <!-- Le opere verranno caricate dinamicamente -->
        </div>
        <div class="load-more-container" id="loadMoreContainer" style="display: none;">
            <button class="load-more-btn" onclick="loadMoreWorks()">Carica altre opere</button>
        </div>
    </section>
    
    <!-- Critical Texts Section -->
    <section id="texts" class="content-section">
        <h2 class="section-title">CRITICA</h2>
        
        <div class="cards-container">
                <!-- Card 1: Claudio Lorenzoni -->
                <div class="critical-card" onclick="openTextModal(0)">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">Adele, ritorna.</h3>
                            <div class="card-line"></div>
                        </div>
                        <div class="card-body">
                            <p class="card-text" style="text-align: left;">Il progetto Ritorno si presenta come un viaggio intimo e circolare, partendo da Parantoro per esplorare l'identità attraverso 49 foglie dipinte. Un nostos che trasmette quel senso di circolarità del viaggio dell'esistenza il cui fine ultimo è arrivare a noi stessi.</p>
                        </div>
                        <div class="card-author">di Claudio Lorenzoni</div>
                    </div>
                    <div class="card-image">
                        <img src="images/adele.png" alt="Claudio Lorenzoni">
                    </div>
                </div>

                <!-- Card 2: Leonardo Varasano -->
                <div class="critical-card" onclick="openTextModal(1)">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">Le foglie di ALF</h3>
                            <div class="card-line"></div>
                        </div>
                        <div class="card-body">
                            <p class="card-text" style="text-align: left;">Alla vigilia della prima grande personale di Adele Lo Feudo al Museo a Cielo Aperto di Camo, le foglie diventano simbolo di una vita fragile ma esplosiva. Un'arte delicata e profonda che racconta volti e ricordi in un concerto di gratitudine.</p>
                        </div>
                        <div class="card-author">di Leonardo Varasano</div>
                    </div>
                    <div class="card-image">
                        <img src="images/Varasano.png" alt="Leonardo Varasano">
                    </div>
                </div>

                <!-- Card 3: Adele Lo Feudo -->
                <div class="critical-card" onclick="openTextModal(2)">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">R I T O R N O</h3>
                            <div class="card-line"></div>
                        </div>
                        <div class="card-body">
                            <p class="card-text" style="text-align: left;">Nelle sue fotografie vi è sempre la precisa volontà di catturare l'essenza di un messaggio universale. Le 49 foglie nascondono un messaggio di memoria, amore per la vita, l'altro e l'arte, invitando il visitatore a far rivivere il proprio passato.</p>
                        </div>
                        <div class="card-author">di Adele Lo Feudo</div>
                    </div>
                    <div class="card-image">
                        <img src="images/Adele.png" alt="Adele Lo Feudo">
                    </div>
                </div>
        </div>
    </section>

    <!-- Text Modal -->
    <div class="text-modal" id="textModal" onclick="closeTextModal(event)">
        <div class="text-modal-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="closeTextModal(event)">&times;</span>
            <div class="text-modal-header">
                <h2 class="text-modal-title" id="textModalTitle"></h2>
                <p class="text-modal-author" id="textModalAuthor"></p>
            </div>
            <div class="text-modal-body" id="textModalBody">
                <!-- Il contenuto verrà inserito dinamicamente -->
            </div>
        </div>
    </div>
    
    <!-- Biography Modal -->
    <div class="biography-modal" id="biographyModal" onclick="closeBiographyModal(event)">
        <div class="biography-modal-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="closeBiographyModal(event)">&times;</span>
            <h2 class="modal-title">Biografia</h2>
            <div class="modal-text">
                <!-- Il contenuto verrà inserito dinamicamente -->
            </div>
        </div>
    </div>
    
    <!-- Video Modal -->
    <div class="video-modal" id="videoModal" onclick="closeVideoModal(event)">
        <div class="video-modal-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="closeVideoModal(event)">&times;</span>
            <video id="modalVideo" autoplay>
                <source src="Ritorno.mp4" type="video/mp4">
                Il tuo browser non supporta il tag video.
            </video>
        </div>
    </div>
    
    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
        <span class="lightbox-close" onclick="closeLightbox(event)">&times;</span>
        <div class="lightbox-container">
            <img src="" alt="" class="lightbox-image" id="lightboxImage">
            <!-- <div class="lightbox-info" onclick="event.stopPropagation()">
                <div class="lightbox-counter" id="lightboxCounter"></div>
                <h3 class="lightbox-title" id="lightboxTitle"></h3>
                <p class="lightbox-description" id="lightboxDescription"></p>
            </div> -->
        </div>
    </div>

    <!-- Back to top button -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">↑</button>
    
    <!-- Section Transition Overlay -->
    <div class="section-transition" id="sectionTransition"></div>
    
    <!-- Works to Critica Transition -->
    <div class="works-to-critica-transition" id="worksToCriticaTransition"></div>



    <script>
        
        // Navigazione senza transizione fade
        function navigateWithTransition(event, targetId) {
            event.preventDefault();
            
            const target = document.getElementById(targetId);
            
            if (!target) return;
            
            // Se siamo già nella sezione, non fare nulla
            const currentSection = document.elementFromPoint(window.innerWidth / 2, window.innerHeight / 2);
            if (currentSection && currentSection.closest(`#${targetId}`)) {
                return;
            }
            
            // Scrolla direttamente alla sezione
            target.scrollIntoView({ behavior: 'smooth' });
            
            // Carica le opere se necessario
            if (targetId === 'works' && allWorks.length === 0) {
                loadWorksData();
            }
        }
        
        // Toggle menu hamburger
        function toggleMenu() {
            const hamburger = document.querySelector('.menu-hamburger');
            const mobileMenu = document.getElementById('mobileMenu');
            hamburger.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            
            // Prevent body scroll when menu is open
            if (mobileMenu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }
        
        // Close menu function
        function closeMenu() {
            const hamburger = document.querySelector('.menu-hamburger');
            const mobileMenu = document.getElementById('mobileMenu');
            hamburger.classList.remove('active');
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Funzione aggiornata per scroll sections
        function updateScrollPosition() {
            // Logica per gestire lo scroll se necessario
        }
        
        // Old function no longer needed
        function showSection(sectionId) {
            return; // Disabled for single page
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
            
            // Show/hide scroll navigation
            const scrollNav = document.getElementById('scrollNav');
            const alfScrollNav = document.getElementById('alfScrollNav');
            if (sectionId === 'texts') {
                scrollNav.classList.add('active');
                alfScrollNav.classList.remove('active');
                updateScrollDots();
            } else if (sectionId === 'alf') {
                alfScrollNav.classList.add('active');
                scrollNav.classList.remove('active');
                updateAlfScrollDots();
                // Nascondi anni duplicati quando si apre la sezione ALF
                setTimeout(hideduplicateYears, 100);
            } else {
                scrollNav.classList.remove('active');
                alfScrollNav.classList.remove('active');
            }
            
            // Carica le opere quando si clicca sul tab
            if (sectionId === 'works' && allWorks.length === 0) {
                loadWorksData();
            }
            
            // La musica ora parte all'apertura, non serve più gestirla per sezione
        }
        
        function scrollToText(index) {
            const textEntries = document.querySelectorAll('.text-entry');
            if (textEntries[index]) {
                const rect = textEntries[index].getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const targetPosition = rect.top + scrollTop - 30; // 30px offset per vedere l'inizio
                
                // Smooth scroll con durata personalizzata
                const startPosition = scrollTop;
                const distance = targetPosition - startPosition;
                const duration = 800; // 800ms per movimento più lento
                let startTime = null;
                
                function animateScroll(currentTime) {
                    if (startTime === null) startTime = currentTime;
                    const timeElapsed = currentTime - startTime;
                    const progress = Math.min(timeElapsed / duration, 1);
                    
                    // Easing function per movimento più fluido
                    const easeInOutCubic = progress < 0.5 
                        ? 4 * progress * progress * progress 
                        : 1 - Math.pow(-2 * progress + 2, 3) / 2;
                    
                    window.scrollTo(0, startPosition + distance * easeInOutCubic);
                    
                    if (timeElapsed < duration) {
                        requestAnimationFrame(animateScroll);
                    }
                }
                
                requestAnimationFrame(animateScroll);
            }
        }
        
        function scrollToAlfSection(index) {
            const alfSections = document.querySelectorAll('.alf-section');
            if (alfSections[index]) {
                const rect = alfSections[index].getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const targetPosition = rect.top + scrollTop - 30;
                
                const startPosition = scrollTop;
                const distance = targetPosition - startPosition;
                const duration = 800;
                let startTime = null;
                
                function animateScroll(currentTime) {
                    if (startTime === null) startTime = currentTime;
                    const timeElapsed = currentTime - startTime;
                    const progress = Math.min(timeElapsed / duration, 1);
                    
                    const easeInOutCubic = progress < 0.5 
                        ? 4 * progress * progress * progress 
                        : 1 - Math.pow(-2 * progress + 2, 3) / 2;
                    
                    window.scrollTo(0, startPosition + distance * easeInOutCubic);
                    
                    if (timeElapsed < duration) {
                        requestAnimationFrame(animateScroll);
                    }
                }
                
                requestAnimationFrame(animateScroll);
            }
        }
        
        function updateScrollDots() {
            const textEntries = document.querySelectorAll('.text-entry');
            const scrollDots = document.querySelectorAll('#scrollNav .scroll-dot');
            
            if (textEntries.length === 0) return;
            
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const windowHeight = window.innerHeight;
            
            let activeIndex = 0;
            textEntries.forEach((entry, index) => {
                const rect = entry.getBoundingClientRect();
                const entryTop = rect.top + scrollTop;
                const entryHeight = rect.height;
                
                if (scrollTop >= entryTop - windowHeight / 2 && 
                    scrollTop < entryTop + entryHeight - windowHeight / 2) {
                    activeIndex = index;
                }
            });
            
            scrollDots.forEach((dot, index) => {
                dot.classList.toggle('active', index === activeIndex);
            });
        }
        
        function updateAlfScrollDots() {
            const alfSections = document.querySelectorAll('.alf-section');
            const alfScrollDots = document.querySelectorAll('#alfScrollNav .scroll-dot');
            
            if (alfSections.length === 0) return;
            
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const windowHeight = window.innerHeight;
            
            let activeIndex = 0;
            alfSections.forEach((section, index) => {
                const rect = section.getBoundingClientRect();
                const sectionTop = rect.top + scrollTop;
                const sectionHeight = rect.height;
                
                if (scrollTop >= sectionTop - windowHeight / 2 && 
                    scrollTop < sectionTop + sectionHeight - windowHeight / 2) {
                    activeIndex = index;
                }
            });
            
            alfScrollDots.forEach((dot, index) => {
                dot.classList.toggle('active', index === activeIndex);
            });
        }
        
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        function toggleBackToTop() {
            const backToTop = document.getElementById('backToTop');
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > 200) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        }
        
        // Update scroll dots and back to top on scroll
        window.addEventListener('scroll', () => {
            if (document.getElementById('scrollNav').classList.contains('active')) {
                updateScrollDots();
            }
            if (document.getElementById('alfScrollNav').classList.contains('active')) {
                updateAlfScrollDots();
            }
            toggleBackToTop();
            
            // Fade in/out hero elements on scroll
            const scrollPosition = window.scrollY;
            const heroHeader = document.querySelector('.hero-header');
            const navbar = document.querySelector('.top-navbar');
            const fadeOutThreshold = 100; // Inizia il fade dopo 100px di scroll
            
            if (scrollPosition > fadeOutThreshold) {
                heroHeader.classList.add('fade-out');
                heroHeader.classList.remove('fade-in');
            } else {
                heroHeader.classList.remove('fade-out');
                // Aggiungi fade-in quando si torna su
                if (heroHeader.classList.contains('loaded')) {
                    heroHeader.classList.add('fade-in');
                }
            }
            
            // Fade out RITORNO logo when approaching last works with delay
            const worksGrid = document.getElementById('worksGrid');
            const ritornoLogo = document.querySelector('.ritorno-svg');
            if (worksGrid && ritornoLogo && allWorks.length > 0) {
                const works = worksGrid.children;
                if (works.length >= 3) {
                    // Prendi la terzultima opera come riferimento per iniziare il fade
                    const thirdLastWork = works[works.length - 3];
                    const rect = thirdLastWork.getBoundingClientRect();
                    const windowHeight = window.innerHeight;
                    
                    // Quando la terzultima opera entra nel viewport, inizia il fade del logo
                    if (rect.top < windowHeight * 0.5) {
                        ritornoLogo.classList.add('fade-out-delayed');
                    } else {
                        ritornoLogo.classList.remove('fade-out-delayed');
                    }
                }
            }
        });
        
        // Variabili per gestire le opere
        let allWorks = [];
        let currentIndex = 0;
        const worksPerLoad = 12;
        
        // Carica i dati delle opere
        async function loadWorksData() {
            console.log('Loading works data...');
            try {
                const response = await fetch('opere.json');
                const data = await response.json();
                allWorks = data.opere;
                console.log('Loaded works:', allWorks.length);
                loadMoreWorks();
            } catch (error) {
                console.error('Errore nel caricamento delle opere:', error);
                // Fallback con le 8 opere esistenti
                allWorks = [
                    { id: 1, filename: "Eugenio.png", titolo: "Eugenio", descrizione: "Il volto di mio padre" },
                    { id: 2, filename: "Ezio.png", titolo: "Ezio", descrizione: "L'amico di sempre" },
                    { id: 3, filename: "Frida.png", titolo: "Frida", descrizione: "Forza e fragilità" },
                    { id: 4, filename: "Lorenzoni.png", titolo: "Claudio Lorenzoni", descrizione: "Il curatore" },
                    { id: 5, filename: "Marina.png", titolo: "Marina", descrizione: "Sguardo di mare" },
                    { id: 6, filename: "Milone.png", titolo: "Milone", descrizione: "La saggezza del tempo" },
                    { id: 7, filename: "Varasano.png", titolo: "Leonardo Varasano", descrizione: "L'amico scrittore" },
                    { id: 8, filename: "Venanti.png", titolo: "Venanti", descrizione: "Il sorriso che illumina" }
                ];
                loadMoreWorks();
            }
        }
        
        // Carica più opere
        function loadMoreWorks() {
            const grid = document.getElementById('worksGrid');
            console.log('Loading more works, grid:', grid, 'current:', currentIndex, 'total:', allWorks.length);
            const endIndex = Math.min(currentIndex + worksPerLoad, allWorks.length);
            
            for (let i = currentIndex; i < endIndex; i++) {
                const work = allWorks[i];
                const workItem = document.createElement('div');
                workItem.className = 'work-item';
                workItem.onclick = () => openLightbox(work);
                
                const img = document.createElement('img');
                img.src = `images/${work.filename}`;
                img.alt = work.titolo;
                img.className = 'work-image';
                img.loading = 'lazy';
                
                // Gestisci errore di caricamento immagine
                img.onerror = function() {
                    workItem.style.display = 'none';
                };
                
                // Gestisci caricamento riuscito
                img.onload = function() {
                    // Rendi visibile l'opera quando carica
                    workItem.style.opacity = '1';
                };
                
                workItem.appendChild(img);
                grid.appendChild(workItem);
            }
            
            currentIndex = endIndex;
            
            // Mostra/nascondi il pulsante "Carica altro"
            const loadMoreContainer = document.getElementById('loadMoreContainer');
            if (currentIndex < allWorks.length) {
                loadMoreContainer.style.display = 'block';
            } else {
                loadMoreContainer.style.display = 'none';
            }
        }
        
        // Lightbox functions
        function openLightbox(work) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            // const lightboxTitle = document.getElementById('lightboxTitle');
            // const lightboxDescription = document.getElementById('lightboxDescription');
            // const lightboxCounter = document.getElementById('lightboxCounter');
            
            lightboxImage.src = `images/${work.filename}`;
            lightboxImage.alt = work.titolo;
            // lightboxTitle.textContent = work.titolo;
            // lightboxDescription.textContent = work.descrizione;
            // lightboxCounter.textContent = work.id.toString().padStart(2, '0'); // Formato 01, 02, etc.
            
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeLightbox(event) {
            if (event) event.stopPropagation();
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Close lightbox on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLightbox();
                closeVideoModal();
            }
        });

        // Reorganize timeline by grouping exhibitions under years
        function reorganizeTimeline() {
            const timelineContainer = document.querySelector('.timeline-items');
            if (!timelineContainer) return;
            
            // Get all timeline items
            const allItems = Array.from(document.querySelectorAll('.timeline-item'));
            
            // Group items by year
            const itemsByYear = {};
            allItems.forEach(item => {
                const yearElement = item.querySelector('.timeline-year');
                if (yearElement) {
                    const year = yearElement.textContent.trim();
                    if (!itemsByYear[year]) {
                        itemsByYear[year] = [];
                    }
                    itemsByYear[year].push(item);
                }
            });
            
            // Clear the container
            timelineContainer.innerHTML = '';
            
            // Create year groups for horizontal layout
            const years = Object.keys(itemsByYear).sort((a, b) => b - a); // Sort years descending
            
            years.forEach((year, yearIndex) => {
                // Create year group container
                const yearGroup = document.createElement('div');
                yearGroup.className = 'timeline-year-group';
                
                // Add year heading
                const yearHeading = document.createElement('div');
                yearHeading.className = 'timeline-year';
                yearHeading.textContent = year;
                yearGroup.appendChild(yearHeading);
                
                // Add all items for this year
                itemsByYear[year].forEach((item, itemIndex) => {
                    // Remove the year from individual items
                    const yearEl = item.querySelector('.timeline-year');
                    if (yearEl) yearEl.remove();
                    
                    // Ensure item has correct classes
                    item.classList.add('timeline-item');
                    
                    yearGroup.appendChild(item);
                });
                
                timelineContainer.appendChild(yearGroup);
            });
            
            // Timeline is now simple - no special handling needed
            
            // Re-setup animations for the new structure
            setupTimelineAnimation();
            
            // Ensure timeline items have fade animations
            const timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach(item => {
                if (!item.classList.contains('fade-element')) {
                    item.classList.add('fade-element');
                }
            });
        }
        
        // Don't reorganize on DOM load - wait for section to be visible
        
        // Execute when clicking on biography
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('nav-link') && e.target.textContent === 'BIOGRAFIA') {
                setTimeout(() => {
                    reorganizeTimeline();
                    setupTimelineAnimation();
                    // Re-init element animations for timeline items
                    initElementAnimations();
                }, 150);
            }
        });
        
        // Animazione timeline on scroll - rimossa per semplificare
        function setupTimelineAnimation() {
            // Animazioni rimosse per i timeline items
        }
        
        // Inizializza animazioni quando si clicca su biografia
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('nav-link') && e.target.textContent === 'BIOGRAFIA') {
                setTimeout(setupTimelineAnimation, 100);
            }
        });
        
        // Inizializza animazioni al caricamento della pagina
        document.addEventListener('DOMContentLoaded', function() {
            setupTimelineAnimation();
        });
        
        // Inizializza anche quando si scrolla alla sezione ALF
        const alfSection = document.querySelector('#alf');
        if (alfSection) {
            let timelineReorganized = false;
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        if (!timelineReorganized) {
                            reorganizeTimeline();
                            timelineReorganized = true;
                            // Re-init element animations after reorganization
                            setTimeout(() => {
                                initElementAnimations();
                            }, 100);
                        }
                        setupTimelineAnimation();
                    }
                });
            }, { threshold: 0.1 });
            
            observer.observe(alfSection);
        }
        
        // Toggle biografia - apre la modale
        function toggleBiography() {
            const modal = document.getElementById('biographyModal');
            const modalText = modal.querySelector('.modal-text');
            
            // Copia tutto il contenuto della biografia nella modale
            const biographyContent = document.querySelector('.biography-content').innerHTML;
            modalText.innerHTML = biographyContent;
            
            // Apri la modale
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // Chiudi la modale biografia
        function closeBiographyModal(event) {
            if (event) event.stopPropagation();
            const modal = document.getElementById('biographyModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Chiudi modale con ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeBiographyModal();
                closeVideoModal();
            }
        });
        
        // Critical Modal Functions
        const criticalTexts = [
            {
                title: "Adele, ritorna.",
                author: "di Claudio Lorenzoni",
                content: `Ho tra le mani le ultime creazioni di Adele Lo Feudo ed ho appena riletto la e-mail di presentazione che mi ha inviato. Fatemi prendere fiato.

Si narra che nella vita quando le persone o i luoghi sono veramente significativi, si ripresenta sempre la possibilità di ritrovarli. Perché il vento fa il suo giro e ogni cosa prima o poi ritorna. E ogni volta che questo accade si percepisce una sorta di nostos, di ritorno, che trasmette quel senso di circolarità del viaggio dell'esistenza il cui fine ultimo è arrivare a noi stessi.

E così è stato. Dopo quasi 10 anni dalla sua prima apparizione in quel di Camo, Adele, con il suo progetto "R I T O R N O", torna a casa, torna in quel luogo, torna tra quelle persone. E lo fa con un nuovo progetto, un nuovo lavoro composto da 49 foglie realizzate in sedici mesi su tela e dipinte in tecnica acrilica.

Le foglie, mi scrive, "nascondono un messaggio in cui chiunque potrebbe rivedersi. Un messaggio di memoria, amore per la vita, l'altro e l'arte".

Con questo progetto Adele ha intrapreso un viaggio molto intimo, partendo da un luogo ben definito, Parantoro, terra di suo padre e dei nonni, per poi dirigersi verso tutti gli altri posti che in qualche modo l'hanno trattenuta.

Ogni foglia è un volto di una persona che in questo lungo viaggio ha "incontrato". Ogni persona un paesaggio personale. Ogni volto è un viaggio. Tutte le foglie viaggi che si intrecciano creando una memoria condivisa impregnata di sogni, sacrifici, lacrime e sorrisi.

Ora mi immagino l'albero da cui sono state raccolte le foglie. È un albero collettivo, con un tronco multivitale ed una corteccia umana, culturale, artistica.

Guardando i suoi lavori, e leggendo la sua presentazione, mi vien spontaneo toccare il tema dei "nostoi", ovvero dei "ritorni" in greco antico. Anche perché i "nostoi" non sono solamente un atto fisico narrato nelle vicende eroiche (Ulisse l'esempio supremo), ma anche, e soprattutto, una riflessione sull'identità, la memoria, la riconciliazione con il passato e la ricerca dei luoghi di provenienza.

Il viaggio che ha intrapreso Adele è sì un ritorno: ma il suo obiettivo non è condurre se stessa ad una meta, ma ricondursi in maniera circolare al suo originario punto di partenza: a casa, ma non una casa fisica. Una casa interiore, la conoscenza di sé.

La circolarità del percorso connota il viaggio non come fine a se stesso, ma come funzionale a un'acquisizione di esperienza e di conoscenza superiori: un progresso rilevabile e misurabile soltanto dal confronto con il punto di partenza, cioè facendo ritorno al luogo nel quale Adele può finalmente rispecchiarsi e (ri)conoscere la nuova identità.

Il nostos, in quest'ottica, implica necessariamente anche la nostalgeia, la nostalgia, il "desiderio sofferto di tornare" a casa, per ritrovare le proprie cose, le proprie radici, ma soprattutto se stessi.

È un continuo muoversi il suo, in avanti per il desiderio di tornare indietro. Indietro verso l'archè, l'origine del tutto.

Il viaggio di ritorno è anche quello nel tempo della memoria, nei ricordi che rendono vivo e presente il passato. Per Cesare Pavese "le cose si scoprono attraverso i ricordi che se ne hanno. Ricordare una cosa significa vederla, ora soltanto, per la prima volta".

Lewis Carroll in Alice attraverso lo specchio si spinge ben oltre facendo dire alla Regina che "è una memoria ben misera quella che ricorda solo ciò che è già avvenuto".

Così come sono dei nostoi quegli episodi delle nostre vite che magari a distanza di anni si rivelano essere il perpetuo ritorno di quanto abbiamo già vissuto: uguali ma diversi. Perché se il copione sembra lo stesso, ora a essere cambiati, a essere diversi, siamo noi.

Spesso questi ritorni si ripresentano sul nostro cammino come prove da superare, nodi del passato ancora da sciogliere, conflitti rimasti troppo a lungo irrisolti. Se non era buona la prima, la vita ci offre una seconda opportunità. Adele con questo progetto, parafrasando José Saramago, nell'infinita circolarità del suo percorso, ogni meta che ha raggiunto non è che una tappa, l'inizio di un nuovo viaggio. Perché bisogna ricominciare il viaggio. Sempre.`
            },
            {
                title: "Le foglie di ALF, un'esplosione di vita e di ricordi",
                author: "di Leonardo Varasano",
                content: `La foglia è al tempo stesso un simbolo di speranza, di vita e di fragilità. Si pensi, ad esempio, ad una foglia nascente, gemma di una nuova, rigogliosa vita, abito elegante per un piccolo fiore o per un albero maestoso e imponente. Si pensi, solo per fare un altro esempio, ad una foglia sferzata da un vento autunnale, strappata da un ramo e alla mercé dell'aria.

Proprio le foglie - con la loro esplosione di vita (inevitabilmete fragile) - sono state scelte da ALF, Adele Lo Feudo, per imprimere una nuova declinazione di un'arte delicata, profonda e sensibile.

Le foglie, con la loro danza al suono evocativo del vento, e la luce, che filtra intervallando un verde intenso: questo lo scenario ispiratore che ha mosso ALF ad un'introspezione fruttuosa, per sé e per noi osservatori. Di lì l'idea di affidare alle foglie i volti - e dunque i ricordi - di donne e uomini importanti per Adele: ricordi personalissimi, che restituiscono il tepore buono della famiglia (a partire dall'amato papà) e dell'amicizia (nella cui schiera sono felice di figurare); ricordi che appartengono all'umanità e alla sua Storia (da San Pio a Papa Francesco, solo per citare due casi).

Tutte insieme, le foglie che immortalano volti e ricordi, restituiscono la vita e la passione per l'arte di Adele. Ne emerge un concerto di gratitudine - per chi l'ha accompagnata nel suo cammino umano ed artistico -, di sacrificio - per la strada percorsa - e di bellezza. Un concerto pittorico, magistralmente realizzato, che ALF imprime sulle foglie, per se e per noi.`
            },
            {
                title: "R I T O R N O",
                author: "di Adele Lo Feudo",
                content: `R I T O R N O dopo nove anni, con grande gioia, a Camo, presso il Museo a Cielo Aperto, che già mi accolse nel 2016 con la personale di pittura Presenze/Assenze:Io sono!

Il merito era ed è ancora di Claudio Lorenzoni, Direttore artistico, di rara umanità e sensibilità, mosso da un vero e disinteressato amore per l'Arte che parla ai cuori.

La mia ultima fatica artistica, "R I T O R N O", è composta da 49 foglie realizzate in sedici mesi su tela e dipinte in tecnica acrilica.

Le foglie nascondono un messaggio in cui chiunque potrebbe rivedersi.

Un messaggio di memoria, amore per la vita, l'altro e l'arte.

Spero che il visitatore possa far rivivere nella sua memoria un pezzetto di quel suo passato che magari ha dimenticato e che gli sta particolarmente a cuore.`
            }
        ];
        
        function openCriticalModal(textId) {
            console.log('Opening critical modal for text:', textId);
            const modal = document.getElementById('criticalModal');
            const modalTitle = document.getElementById('criticalModalTitle');
            const modalAuthor = document.getElementById('criticalModalAuthor');
            const modalText = document.getElementById('criticalModalText');
            const textData = criticalTexts[textId];
            const originalContent = document.getElementById(textData.contentId).innerHTML;
            
            modalTitle.textContent = textData.title;
            modalAuthor.textContent = textData.author;
            modalText.innerHTML = originalContent;
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            console.log('Modal should be visible now');
        }
        
        function closeCriticalModal(event) {
            if (!event || event.target.id === 'criticalModal' || event.target.classList.contains('modal-close')) {
                const modal = document.getElementById('criticalModal');
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        // Open text modal
        function openTextModal(index) {
            const modal = document.getElementById('textModal');
            const modalTitle = document.getElementById('textModalTitle');
            const modalAuthor = document.getElementById('textModalAuthor');
            const modalBody = document.getElementById('textModalBody');
            
            const text = criticalTexts[index];
            
            modalTitle.textContent = text.title;
            modalAuthor.textContent = text.author;
            modalBody.innerHTML = text.content.split('\n\n').map(p => `<p style="text-align: left;">${p}</p>`).join('');
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // Close text modal
        function closeTextModal(event) {
            if (event) event.stopPropagation();
            const modal = document.getElementById('textModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        // Apri modale video
        function openVideoModal() {
            const modal = document.getElementById('videoModal');
            const video = document.getElementById('modalVideo');
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            video.currentTime = 0;
            video.play();
        }
        
        // Chiudi modale video
        function closeVideoModal(event) {
            if (event) event.stopPropagation();
            const modal = document.getElementById('videoModal');
            const video = document.getElementById('modalVideo');
            
            modal.classList.remove('active');
            document.body.style.overflow = '';
            video.pause();
            video.currentTime = 0;
        }
        
        // Rimuovo il blocco dello scroll per permettere scroll naturale
        // Le opere ora scrollano sopra la hero section fissa
        
        // Initialize section transitions on scroll
        function initSectionTransitions() {
            const worksSection = document.querySelector('.works-section');
            const criticaSection = document.querySelector('#texts');
            const transitionOverlay = document.getElementById('worksToCriticaTransition');
            
            if (!worksSection || !criticaSection || !transitionOverlay) return;
            
            let isTransitioning = false;
            let lastScrollY = window.scrollY;
            
            // Create a trigger zone before the critica section
            const triggerElement = document.createElement('div');
            triggerElement.className = 'transition-trigger';
            triggerElement.style.height = '300px';
            triggerElement.style.position = 'absolute';
            triggerElement.style.top = '-300px';
            triggerElement.style.width = '100%';
            triggerElement.style.pointerEvents = 'none';
            criticaSection.style.position = 'relative';
            criticaSection.appendChild(triggerElement);
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.target === triggerElement && entry.isIntersecting && !isTransitioning) {
                        const currentScrollY = window.scrollY;
                        
                        // Only trigger when scrolling down
                        if (currentScrollY > lastScrollY) {
                            isTransitioning = true;
                            
                            // Fade out RITORNO logo first
                            const ritornoLogo = document.querySelector('.ritorno-svg');
                            if (ritornoLogo) {
                                ritornoLogo.style.transition = 'opacity 0.5s ease-out';
                                ritornoLogo.style.opacity = '0';
                            }
                            
                            // Start fade to black after logo fades
                            setTimeout(() => {
                                transitionOverlay.classList.add('active');
                                
                                // Keep black for a moment then fade out
                                setTimeout(() => {
                                    transitionOverlay.classList.remove('active');
                                    
                                    // Restore logo opacity
                                    if (ritornoLogo) {
                                        ritornoLogo.style.opacity = '1';
                                    }
                                }, 1200);
                            }, 600);
                            
                            // Reset after full transition
                            setTimeout(() => {
                                isTransitioning = false;
                            }, 2800);
                        }
                    }
                    lastScrollY = window.scrollY;
                });
            }, {
                threshold: 0.5,
                rootMargin: '0px'
            });
            
            observer.observe(triggerElement);
        }
        
        // Initialize element visibility animations
        function initElementAnimations() {
            // Elements to animate in Critica section
            const criticalElements = document.querySelectorAll('.text-entry, .scroll-nav');
            
            // Elements to animate in Biografia section  
            const biographyElements = document.querySelectorAll('.biography-entry, .timeline-year-group, .timeline-item, .alf-link');
            
            const elementObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('fade-in-visible');
                        entry.target.classList.remove('fade-out');
                    } else {
                        // Only fade out if element was previously visible
                        if (entry.target.classList.contains('fade-in-visible')) {
                            entry.target.classList.add('fade-out');
                            entry.target.classList.remove('fade-in-visible');
                        }
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '-50px'
            });
            
            // Apply observer to all elements
            [...criticalElements, ...biographyElements].forEach(element => {
                element.classList.add('fade-element');
                elementObserver.observe(element);
            });
        }
        
        // Initialize critical cards animation
        function initCriticalCardsAnimation() {
            const cards = document.querySelectorAll('.critical-card');
            
            const cardObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.2,
                rootMargin: '-50px'
            });
            
            cards.forEach(card => {
                cardObserver.observe(card);
            });
        }
        
        // Carica automaticamente le opere quando la pagina si carica
        document.addEventListener('DOMContentLoaded', function() {
            // Forza lo scroll in cima al caricamento della pagina
            window.scrollTo(0, 0);
            
            loadWorksData();
            initElementAnimations();
            initSectionTransitions();
            initCriticalCardsAnimation();
            
            // Trigger fade in animation for hero elements and navbar
            setTimeout(() => {
                const heroHeader = document.querySelector('.hero-header');
                const navbar = document.querySelector('.top-navbar');
                heroHeader.classList.add('loaded');
                navbar.classList.add('loaded');
            }, 100);
            
        });
        
        // Forza scroll in cima anche prima del DOMContentLoaded
        window.addEventListener('load', function() {
            setTimeout(() => {
                window.scrollTo(0, 0);
            }, 0);
        });
        
    </script>

    <!-- Hero Section Bottom con Cards CRITICA -->
    <section class="hero-section hero-bottom" id="bottom">
        <div class="hero-content">
            <div class="hero-header">
                <div class="museo">Museo a Cielo Aperto di Camo</div>
                <img src="ritorno.svg" alt="RITORNO" class="ritorno-svg">
                
                <div class="subtitle-block">
                    <div class="subtitle-text">
                        PERSONALE DI ADELE LO FEUDO<br>
                        A CURA DI CLAUDIO LORENZONI
                    </div>
                </div>
            </div>
            
            <!-- Cards CRITICA -->
            <div class="cards-container bottom-cards">
                <!-- Card 1: Claudio Lorenzoni -->
                <div class="critical-card" onclick="openTextModal(0)">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">Adele, ritorna.</h3>
                            <div class="card-line"></div>
                        </div>
                        <div class="card-body">
                            <p class="card-text" style="text-align: left;">Il progetto Ritorno si presenta come un viaggio intimo e circolare, partendo da Parantoro per esplorare l'identità attraverso 49 foglie dipinte. Un nostos che trasmette quel senso di circolarità del viaggio dell'esistenza il cui fine ultimo è arrivare a noi stessi.</p>
                        </div>
                        <div class="card-author">di Claudio Lorenzoni</div>
                    </div>
                    <div class="card-image">
                        <img src="images/adele.png" alt="Claudio Lorenzoni">
                    </div>
                </div>

                <!-- Card 2: Leonardo Varasano -->
                <div class="critical-card" onclick="openTextModal(1)">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">Le foglie di ALF</h3>
                            <div class="card-line"></div>
                        </div>
                        <div class="card-body">
                            <p class="card-text" style="text-align: left;">Alla vigilia della prima grande personale di Adele Lo Feudo al Museo a Cielo Aperto di Camo, le foglie diventano simbolo di una vita fragile ma esplosiva. Un'arte delicata e profonda che racconta volti e ricordi in un concerto di gratitudine.</p>
                        </div>
                        <div class="card-author">di Leonardo Varasano</div>
                    </div>
                    <div class="card-image">
                        <img src="images/Varasano.png" alt="Leonardo Varasano">
                    </div>
                </div>

                <!-- Card 3: Adele Lo Feudo -->
                <div class="critical-card" onclick="openTextModal(2)">
                    <div class="card-content">
                        <div class="card-header">
                            <h3 class="card-title">R I T O R N O</h3>
                            <div class="card-line"></div>
                        </div>
                        <div class="card-body">
                            <p class="card-text" style="text-align: left;">Nelle sue fotografie vi è sempre la precisa volontà di catturare l'essenza di un messaggio universale. Le 49 foglie nascondono un messaggio di memoria, amore per la vita, l'altro e l'arte, invitando il visitatore a far rivivere il proprio passato.</p>
                        </div>
                        <div class="card-author">di Adele Lo Feudo</div>
                    </div>
                    <div class="card-image">
                        <img src="images/Adele.png" alt="Adele Lo Feudo">
                    </div>
                </div>
            </div>
            
            <div class="bottom-spacing"></div>
        </div>
    </section>

</body>
</html><!-- Deployment trigger -->